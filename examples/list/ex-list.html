<script type="module">
    import './ex-item.html'
    import * as List from './list.js'

    function fade(element, {duration= 1000} = {}, {direction = 'in'} = {}) {
        return element.animate(
            [
                { opacity: direction === 'out' ?  1 : 0 }, // Start with opacity 0
                { opacity: direction === 'out' ?  0 : 1 } // End with opacity 1
            ],
            {
                duration, // Animation duration in milliseconds (e.g., 1000ms = 1 second)
                easing: 'ease-in-out', // Easing function for a smoother animation
                fill: 'forwards'
            }
        )
    }

    export class ExList extends HTMLElement {}

    customElements.define('ex-list', ExList)
</script>

<template shadowRootMode="open">
    <div>
        <article>
            <ul>{#if List.items.length > 5}
                ooo
                {/if}
                {List.items.length}
                {#each List.items as item (item.name)}
                <ex-item
                    animate="{fade()}"
                    item="{item}"
                    color="{`hsla(240, 100%, ${List.items.length}0%, 50%)`}"
                ></ex-item>
                {/each}
            </ul>
            <button onclick="{List.add()}">add</button>
        </article>
    </div>
    <style>
        div {
            display: flex;
            align-items: center;
            justify-content: center;
            height: 100vh;
        }
        article {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }
        ul {
            margin: 0;
            padding: 0;
            list-style-type: none;
        }
        button {
            display: block;
            padding: 0.5rem;
            font-size: 1.1rem;
            text-transform: uppercase;
        }
    </style>
</template>
